<image_block id="image_block">
<div class="column is-12 g-0 p-0 m-0 mt-4"> 
     <!-- Folder Navigation & Breadcrumbs -->
    <div class="columns is-mobile is-centered is-gapless m-0 p-0">
        <div class="column is-2"></div>
        <div class="column is-one-third has-text-centered is-gapless m-0 p-0">
            <nav class="breadcrumb is-small is-gapless m-0 p-0" aria-label="breadcrumbs">
                <ul>
                {% for breadcrumb in breadcrumbs %}
                    <li><a href='{{breadcrumb.url}}'>{{breadcrumb.name}}</a></li>
                {% endfor %}
                <li class="is-active"><h3>{{ gallery_name|wordwrap(width=50,break_long_words=True) -}}</h3></li>
                </ul>
            </nav>
        </div>
        <div class="column is-one-third has-text-left is-gapless m-0 p-0">
                <!-- Search results don't have prev/next directory navigation -->
        </div>
        <div class="column is-one-third has-text-left is-gapless m-0 p-0">
                <!-- Search results don't have prev/next directory navigation -->
        </div>
    </div><!-- Folder Navigation & Breadcrumbs -->

    <div class="columns is-mobile is-gapless is-centered has-text-centered m-0 p-0"  style="margin-bottom:1px;margin-top:1px;">
        <div class="column is-1">
        </div>
        <div class="column is-11 is-narrow is-gapless" style="border:1px solid black;margin-bottom:1px;margin-top:1px;">
            <div class="columns is-mobile  is-multiline is-gapless is-centered has-text-centered"  style="margin-bottom:1px;margin-top:1px;">
                {%- for item in items_to_display -%}
                    {# Cache expensive function calls #}
                    {% set item_bg_color = item.filetype.color %}
                    {% set item_view_url = item.get_view_url() %}
                    {% set item_thumbnail_url = item.get_thumbnail_url() %}
                    <div class="column is-one-third" style="border:1px solid black;background-color:#{{item_bg_color}};">
                        <b>{{ loop.index }}</b> <br>
<!-- title -->
                        {% if item.filetype.is_link %}
                            <span class="is-size-7"><a href="{{ item.fqpndirectory if item.fqpndirectory is defined else '#' }}"
                                                        style="background-color:#{{item_bg_color}}; color: black !important;"
                                                        hx-get="{{ item.fqpndirectory if item.fqpndirectory is defined else '#' }}"
                                                        hx-push-url="true"
                                                        hx-target="body"
                                                        hx-swap="outerHTML transition:true">
                            {{ item.name.split("*")[0] }}</a></span><br>
                            <img loading='lazy' data-src="{{item_thumbnail_url}}" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'%3E%3C/svg%3E" class="img-responsive lazy-image" style="width:auto;max-width:100%" data-loaded="false"/>
                        {% elif item.fqpndirectory is defined %}
                            <!-- This is a directory (IndexDirs) -->
                            <span class="is-size-7"><a href="{{item_view_url}}?sort={{sort}}"
                                                        style="background-color:#{{item_bg_color}}; color: black !important;"
                                                        hx-get="{{item_view_url}}?sort={{sort}}"
                                                        hx-push-url="true"
                                                        hx-target="body"
                                                        hx-swap="outerHTML transition:true">
                            {{ item.name|wordwrap(width=24, break_long_words=True)}}</a></span>
                            <br>
                            <img loading='lazy' data-src="{{item_thumbnail_url}}" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'%3E%3C/svg%3E" class="img-responsive lazy-image" style="width:auto;max-width:100%" data-loaded="false"/>
                        {% else %}
                            <!-- This is a file (IndexData) -->
                            <span class="is-size-7"><a href="{{item_view_url}}?sort={{sort}}"
                                                        style="background-color:#{{item_bg_color}}; color: black !important;"
                                                        hx-get="{{item_view_url}}?sort={{sort}}"
                                                        hx-push-url="true"
                                                        hx-target="body"
                                                        hx-swap="outerHTML transition:true">
                            {{ item.name|wordwrap(width=24, break_long_words=True)}}</a></span>
                            {% if item.is_animated -%} {{ icon("fa-solid fa-film") }} {% endif%}
                            <br>
                            <img loading='lazy' data-src="{{item_thumbnail_url}}" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'%3E%3C/svg%3E" class="img-responsive lazy-image" style="width:auto;max-width:100%" data-loaded="false"/>
                        {% endif %}
<!-- Display thumbnail  -->
                        </a>

                        <div class="cell flex-shrink">
                            {% if item.filetype.is_link %}
                                <a href="{{ item.fqpndirectory if item.fqpndirectory is defined else '#' }}" target="_blank" style="m-0;p-0;margin-top:-20px;display: flex; justify-content: flex-end;margin-right:10px;">
                                    {{ icon("external-link-alt fa-xl") }}
                                </a>
                            {% else %}
                                <a href="{{item_view_url}}?sort={{sort}}" target="_blank" style="m-0;p-0;margin-top:-20px;display: flex; justify-content: flex-end;margin-right:10px;">
                                    {{ icon("external-link-alt fa-xl") }}
                                </a>
                            {% endif %}
                            <br>
                        </div>

                        <div class="fixed-grid has-3-cols is-gapless is-column-gap-0 is-row-gap-0 m-0 p-0">
                            <div class="grid is-gapless is-column-gap-0 is-row-gap-0 m-0 p-0">
                                {% if item.filetype.is_dir and item.get_dir_counts is defined %}
                                <div class="cell flex-shrink">
                                    {{ icon("fa-regular fa-folder")}}
                                    {% set dir_counts = item.dir_count_cached if item.dir_count_cached is defined else item.get_dir_counts() %}
                                        {% if dir_counts not in [0, None, "", -1]  %}
                                            <span class="is-size-6" style="color:black">{{ dir_counts | intcomma }}
                                            </span>
                                        {% endif %}
                                </div>
                                <div class="cell flex-shrink">
                                    {{ icon("fa-regular fa-file")}}
                                    {% set file_counts = item.file_count_cached if item.file_count_cached is defined else item.get_file_counts() %}
                                    {% if file_counts not in [0, None, "", -1]  %}
                                        <span class="is-size-6"  style="color:black">{{ file_counts | intcomma }}
                                        </span>
                                    {% endif %}
                                </div>
                                {% endif %}
                                <div class="cell flex-shrink">
                                    {{ icon("fa-regular fa-calendar")}}
                                    <b class="is-size-7"  style="color:black">{{ fromtimestamp( item.lastmod).strftime("%m/%d/%y %H:%M") }}</b>
                                </div>
                            <div class="cell flex-shrink">
                                {% if item.size is defined and item.size and not item.filetype.is_movie and not item.filetype.is_dir %}
                                    {{ icon("fa-regular fa-ruler")}}
                                    <b class="is-size-7  m-0 p-0" style="color:black"> {{ naturalsize(item.size, gnu=True) }}</b>
                                {% endif %}
                                {% if item.duration is defined and item.filetype.is_movie %}
                                    {{ icon("fa-regular fa-clock")}}
                                <b class="is-size-7 m-0 p-0" style="color:black"> {{ precisedelta(item.duration) }}</b>
                                {% endif %}
                            </div>
                        </div>
                        </div>

                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

</div>
</image_block>