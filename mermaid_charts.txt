graph TD
    Index_Data --> aa(Thumbnail Index)
    aa --> bb(SmallThumb Table)
    aa --> cc(MediumThumb Table)
    aa --> dd(Large)

    WebRequest --> |Directory or Files| B(Check fs_Cache_Tracking)
    B --> |Directory not in \n fs_Cache_Tracking|M(Scan Directory)
    B --> |Found in Cache \n fs_Cache_Tracking| D
    M --> N(Process Changes in Directory)
    N --> O(Create or Update File Records in \n Database Index_data)
    O --> P(Create Thumbnail Record in \n Thumbnails_Files or Thumbnails_Dirs)
    P --> D(Send content to client)
    WebRequest --> |Thumbnails|AA(Check Index_Data for \n UUID of thumbnail target)
    AA --> |Not Found| BB(Display Error)
    AA --> CC(Record Found)
    CC --> |Thumbnail Does not Exist|DD(Create Thumbnail)
    CC --> |Thumbnail Exists|EE(Send Thumbnail to client)
    DD --> EE

